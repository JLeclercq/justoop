/*! justoop 0.0.8 -r 02-03-2015 */
"use strict";!function(){var require_,exports_,globals,has_module="undefined"!=typeof module,has_require="undefined"!=typeof require;has_require?(require_=module.require,exports_=module.exports,globals=global):("undefined"!=typeof window&&(require_=window.require=function(){var a=window._;if(!a)throw new Error("underscore not defined");return a}),globals=window,exports_={}),function(globals,require,exports){function makeArray(a){var b=[];return each(a,function(a,c){b.push(c)}),b}function getTracer(a){var b=function(){};return isDefined(console)&&(b=function(){try{console[a].apply(console,makeArray(arguments))}catch(b){var c=makeArray(arguments).join(" ");console.log(c)}}),b}function assert(a,b){if(!a){var b=Array.prototype.slice.call(arguments,1),c=b.join(" ");throw error(c),new Error(c||"assertion fail")}}function isDefined(a){return!isUndefined(a)}function isUndefined(a){return"undefined"==typeof a}function isString(a){return"string"==typeof a||String.prototype.isPrototypeOf(a)}function isUndefined(a){return"undefined"==typeof a}function isDefined(a){return!isUndefined(a)}function Namespace_isPrototypeOf(a){return Namespace.prototype.isPrototypeOf(a)}function existingNamespace(a){var b=__global_namespaces.get(a);return assert(Namespace_isPrototypeOf(b)),b}function each(a,b){if(null==a)return a;var c,d=a.length;if(d===+d)for(c=0;d>c;c++){var e=b(c,a[c],a);if(e===!1)break}else{var f=keys(a);for(c=0,d=f.length;d>c;c++){var e=b(f[c],a[f[c]],a);if(e===!1)break}}return a}function namespace(){var a,b;return each(arguments,function(c,d){b=d.split(".");var e=b[0],f=a=globals[e];(isUndefined(f)||!Namespace_isPrototypeOf(f))&&(f=new Namespace(e,f),a=globals[e]=f),each(b.slice(1),function(c,d){var e=b.slice(0,c+2).join("."),f=a[d];(isUndefined(f)||!Namespace_isPrototypeOf(f))&&(f=new Namespace(e,f),a[d]=f),a=f})}),a}function namespaces(){return __global_namespaces.namespaces()}function getErrorStack(a){return a.stack?a.stack:"unkown\nunkown\nunkown\nunkown"}function get(a,b){var c;return 2==arguments.length?(c=a[b],assert(isDefined(c),"undefined ",b," in ",a)):(c=a,assert(isDefined(c),"undefined property")),c}function isPlainObject(a){if("object"!=typeof a)return!1;try{if(a.constructor&&!hasOwn.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0}function bind(a,b){var c,d;return nativeBind&&a.bind===nativeBind?nativeBind.apply(a,slice.call(arguments,1)):(assert(isFunction(a)),c=slice.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(slice.call(arguments)));ctor.prototype=a.prototype;var e=new ctor;ctor.prototype=null;var f=a.apply(e,c.concat(slice.call(arguments)));return Object(f)===f?f:e})}function getObject(a){if(isString(a)){for(var b,c=a.split("."),d=c.length,e=globals,f=0;d>f;f++){var g=c[f];f==d-1?b=e[g]:e=e[g]}return assert(b,a,"not found"),b}return a}function hasMembers(a,b){var c=!0;return each(a,function(a,d){var e=b[d];return c=c&&isDefined(e),c?void 0:!1}),c}function stringify(a){return JSON.stringify(a)}function attributes(a){var b=[];for(var c in a)b.push(c);return b}function implements_(a,b){if(a[implements_method])return a[implements_method](b);var c;if(isFunction(b))c=b.prototype;else{if(!isObject(b))return!1;c=b.constructor.prototype}var d;if(isFunction(a))d=a.prototype;else{if(!isObject(a))return!1;d=a}return c.isPrototypeOf(d)}function isObject(a){return a===Object(a)}function __implements__(a){var b=a;if(isFunction(a)&&(b=a.prototype),assert(isFunction(this)),b==this.prototype||b.isPrototypeOf(this.prototype))return!0;var c=this.__interfaces__;if(c)for(var d=c.length,e=0;d>e;e++){var f=c[e];if(implements_(f,b))return!0}return this.__super__?implements_(this.__super__.constructor,a):!1}function public_class(a){var b=new PublicSubclasser(a);return b.subclass.apply(b,makeArray(arguments).slice(1))}function subclass(){var a=new Subclasser;return a.subclass.apply(a,makeArray(arguments))}function isClass(a){if(a.__super__){var b=a.__super__.constructor;return b==Object||isObject(b.__super__)}return!1}function _getClass(a){if(isFunction(a))return a;var b=a.constructor;return assert(b),b}function _allSuperclasses(a){var b=_getClass(a),c=[],d=b.__super__;if(d){c.push(d.constructor);var e=_allSuperclasses(d);c.push.apply(c,e)}return c}function _allSubclasses(a){var b=_getClass(a),c=[],d=b.__subclasses__||[];return c.push.apply(c,d),d&&each(d,function(a,b){var d=_allSubclasses(b);c.push.apply(c,d)}),c}var log=getTracer("log"),error=getTracer("log"),underscore=require("underscore"),justoop=globals.justoop||{},_each=get(underscore.each),extend=get(underscore.extend),map=get(underscore.map),isFunction=get(underscore.isFunction),contains=get(underscore.contains),keys=get(underscore.keys),js_line_property="__js_line__",property_name="__name__",package_property="__package__",current_package_property="__current_package_name__",current_package=justoop[current_package_property],package_name=current_package,ns_name="justoop",Namespace=function(){function a(a,b){this[property_name]=a,__global_namespaces.set(this),isDefined(b)&&publish(this,b)}return a[package_property]=justoop[current_package_property],a}(),GlobalNamespaces=function(){function a(){this.__namespaces={}}function b(a){assert(Namespace_isPrototypeOf(a),a,"not a namespace object");var b=a[property_name],c=this.__namespaces;assert(!c[b],b,"already defined"),this.__namespaces[b]=a}function c(){return map(this.__namespaces,function(a){return a})}function d(a){return this.__namespaces[a]}var e=a.prototype;return extend(e,{package_property:current_package,get:d,set:b,namespaces:c}),a[package_property]=current_package,a}(),__global_namespaces=new GlobalNamespaces,debug_info=justoop.debug||isDefined(justoop.__loaded_packages__)&&isDefined(package_name)&&!justoop.__loaded_packages__[package_name].compressed,stack_depth=4,publish=justoop.publish=function(a,b){return a.__publish__?a.__publish__(b):each(b,function(b,c){if("__publish__"!=b){if(assert(!a[b],b,"already defined"),assert(isDefined(c),"undefined  value for",b),debug_info&&c&&!c[js_line_property])try{throw new Error("")}catch(d){var e=getErrorStack(d);try{c[js_line_property]=e.split("\n")[stack_depth]}catch(d){}}if(c&&!c[package_property])try{c[package_property]=justoop[current_package_property]}catch(d){}c&&c.__publish__&&(c=c.__publish__(a,b)),a[b]=c}}),a},ns=namespace(ns_name),ArrayProto=Array.prototype,FuncProto=Function.prototype,nativeBind=FuncProto.bind,slice=ArrayProto.slice;if(globals.console)try{log=bind(console.log,console)}catch(e){log=function(){var a=makeArray(arguments),b=a.join(" ");console.log(b)}}var Array_prototype=Array.prototype,sliceArray=Array_prototype.slice,interfaces_property="__interfaces__",init_class_property="__init__class__",subclasses_property="__subclasses__",implements_method="__implements__",super_property="__super__",constuctor_property="constructor",class_property="__class__",reserved_methods=[constuctor_property,js_line_property,class_property,js_line_property,interfaces_property,super_property,subclasses_property],Object_prototype=Object.prototype,Subclasser=function(){function a(){}function b(a,b){for(var c in b){var d=b[c];this._assignMember(a,c,d)}return a}function c(a,b,c){a[b]=c}var d="missing new operator",e=a.prototype;return e.stack_depth=3,e.subclass=function(){var a,b,c,e,f,g=[],h=Object_prototype.constructor,i=function(){};each(arguments,function(b,c){isFunction(c)?g.push(c):(assert(!a,"class prototype already specified"),a=c)}),b=g[0]||Object,i.prototype=b.prototype,c=g.slice(1);var j=this.stack_depth,k=new i;if(f=a.constructor,f==h&&(f=b.prototype.constructor),e=this._createConstructor(f,k,d),f=e,f.prototype=k,this._copyMembers(k,a),f[implements_method]||(f[implements_method]=__implements__,k[implements_method]=bind(__implements__,f)),each(c,function(a,b){var c=b;isFunction(b)&&(c=b.prototype),isUndefined(f[interfaces_property])&&(f[interfaces_property]=[]),f[interfaces_property].push(c);var d={};each(attributes(c),function(a,b){if(!contains(reserved_methods,b)){var e=c[b];isFunction(e)&&(e=function(a,c){var a=b,d=c;return function(){return d[a].apply(this,arguments)}}(b,c)),d[b]=e}});for(var e in d)k[e]||(k[e]=d[e])}),k.constructor=f,f[super_property]=b.prototype,k[init_class_property]&&k[init_class_property].call(f),debug_info)try{throw new Error("")}catch(l){var m=getErrorStack(l);k[js_line_property]=m.split("\n")[j],f[js_line_property]=k[js_line_property]}return isUndefined(b[subclasses_property])&&(b[subclasses_property]=[]),b[subclasses_property].push(f),f[package_property]=justoop[current_package_property],k[class_property]=f,f},e._createFirstConstructor=function(a,b,c){return assert(a),assert(b),assert(c),function(){assert(b.isPrototypeOf(this),c),a.apply(this,arguments)}},e._copyMembers=b,e._assignMember=c,e._createConstructor=function(a,b,c){return assert(a),assert(b),assert(c),function(){assert(b.isPrototypeOf(this),c),a.apply(this,arguments)}},a}(),PublicSubclasser=function(superClass){function constructor(a){this.__className=a,PublicSubclasser.__super__.constructor.apply(this,makeArray(arguments))}function __createConstructor(funcname,_c,c_prototype,missing_new){assert(this.__className,"missing classname");var __className=this.__className,script;if(-1==__className.indexOf(".")){var f_=PublicSubclasser[super_property][funcname].apply(this,sliceArray.call(arguments,1));script="var "+__className+" = function  (){f_.apply(this, arguments);};"+this.__className+";"}else{var f_=PublicSubclasser[super_property][funcname].apply(this,sliceArray.call(arguments,1));script=__className+" = function  (){f_.apply(this, arguments);};"+this.__className+";"}var res=eval(script);return res}function _createConstructor(){var a=makeArray(arguments);return __createConstructor.apply(this,["_createConstructor"].concat(a))}function _createFirstConstructor(){var a=makeArray(arguments);return __createConstructor.apply(this,["_createFirstConstructor"].concat(a))}function allClasses(){return map(__class_registry,function(a){return a})}function _subclass(){var a=this.__className;assert(isString(a),"first argument must ne a string");var b=PublicSubclasser[super_property].subclass.apply(this,makeArray(arguments));return b[property_name]=a,__class_registry[a]=b,b}var __class_registry={};return subclass(superClass,{constructor:constructor,allClasses:allClasses,_createFirstConstructor:_createFirstConstructor,_createConstructor:_createConstructor,subclass:_subclass,stack_depth:4})}(Subclasser);Function.prototype.__publish__=function(a,b){if(this.prototype&&this.prototype.__class__){var c=[a.__name__,b].join("."),d=public_class(c,this,{});return d.__js_line__=d.prototype.__js_line__=this.__js_line__,d}return this};var gbind=bind,ObjectEx=function(){function a(a){isString(a)&&(a=this[a]),assert(a,a,"not in ",this);var b=makeArray(arguments).slice(1),c=gbind.apply(this,[a,this].concat(b));return c}function b(){return _allSubclasses(this)}function c(){return _allSuperclasses(this)}return subclass({bind:a,allSubclasses:b,allSuperclasses:c},Object)}(Object),res=publish(ns,{bind:bind,allSubclasses:_allSubclasses,allSuperclasses:_allSuperclasses,stringify:stringify,namespace:namespace,namespaces:namespaces,isString:isString,getErrorStack:getErrorStack,isDefined:isDefined,get:get,getObject:getObject,contains:contains,each:each,map:map,ObjectEx:ObjectEx,log:log,error:error,isFunction:isFunction,makeArray:makeArray,debug_info:debug_info,js_line_property:js_line_property,property_name:property_name,current_package_property:current_package_property,package_property:package_property,hasMembers:hasMembers,existingNamespace:existingNamespace,isUndefined:isUndefined,assert:assert,getClass:getObject,subclass:subclass,Subclasser:Subclasser,super_property:super_property,isObject:isObject,isClass:isClass,implements_:implements_,public_class:public_class,PublicSubclasser:PublicSubclasser});"undefined"==typeof module&&namespace("justoop"),extend(exports,ns),exports.publish=publish}(globals,require_,exports_)}();